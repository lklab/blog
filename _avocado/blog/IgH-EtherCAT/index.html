<!DOCTYPE html>
<html lang="en" class="position-relative">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />

    <!-- Prefetch DNS for faster page speed -->
    <link rel="dns-prefetch" href="//fonts.googleapis.com" />
    <link rel="dns-prefetch" href="//google-analytics.com" />
    <link rel="dns-prefetch" href="//www.google-analytics.com" />
    <link rel="dns-prefetch" href="//maxcdn.bootstrapcdn.com" />
    <link rel="dns-prefetch" href="//ajax.googleapis.com" />
    <link rel="dns-prefetch" href="//fonts.gstatic.com" />
    
    <!-- Prefetch disqus DNS for faster page speed -->
    <link rel="dns-prefetch" href="https://lklab-github-io-blog.disqus.com/" />
      <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>IgH EtherCAT Master Stack API 분석 | Avopado</title>
<meta name="generator" content="Jekyll v3.8.4" />
<meta property="og:title" content="IgH EtherCAT Master Stack API 분석" />
<meta name="author" content="khlee" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="준비물" />
<meta property="og:description" content="준비물" />
<link rel="canonical" href="http://localhost:4000/blog/IgH-EtherCAT/" />
<meta property="og:url" content="http://localhost:4000/blog/IgH-EtherCAT/" />
<meta property="og:site_name" content="Avopado" />
<meta property="og:image" content="http://localhost:4000/assets/post/18-02-14-IgH-EtherCAT/ethercat.jpg" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-02-14T00:00:00+09:00" />
<meta name="twitter:card" content="summary_large_image" />
<meta property="twitter:image" content="http://localhost:4000/assets/post/18-02-14-IgH-EtherCAT/ethercat.jpg" />
<meta property="twitter:title" content="IgH EtherCAT Master Stack API 분석" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"khlee"},"dateModified":"2018-02-14T00:00:00+09:00","datePublished":"2018-02-14T00:00:00+09:00","description":"준비물","headline":"IgH EtherCAT Master Stack API 분석","image":"http://localhost:4000/assets/post/18-02-14-IgH-EtherCAT/ethercat.jpg","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/blog/IgH-EtherCAT/"},"url":"http://localhost:4000/blog/IgH-EtherCAT/"}</script>
<!-- End Jekyll SEO tag -->
 

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/assets/css/main.css" />

    <!-- Fontawesome Icons CSS -->
    <link
      rel="stylesheet"
      href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"
    />

    <!-- Replace these icons with your own. -->

    <link
      rel="apple-touch-icon"
      sizes="60x60"
      href="/assets/img/apple-icon-60x60.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="114x114"
      href="/assets/img/apple-icon-114x114.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="152x152"
      href="/assets/img/apple-icon-152x152.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="192x192"
      href="/assets/img/android-icon-192x192.png"
    />
    <link
      rel="shortcut icon"
      href="/favicon.ico"
      type="image/x-icon"
    />
    <link
      rel="icon"
      href="/favicon.ico"
      type="image/x-icon"
    />

    

    <!-- Google Analytics code. <head> tag is the right place for analytics code as directed by Google. This is unofficial light version which loads blazing fast! Implemented for faster page load.  -->
    <script src="https://cdn.jsdelivr.net/npm/ga-lite@1/dist/ga-lite.min.js" async></script>
<script>
var galite = galite || {};
galite.UA = 'G-LYHC56N0SX'; 
</script>  
    <script
      async
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML"
    ></script>
     
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.3/Chart.min.js"></script>
    
    <noscript>
      <style>
        .loader {
          display: none;
        }
        .dropdown-menu {
          display: block;
        }
        .rev {
          visibility: visible;
        }
        .owl-carousel {
          display: flex;
        }
        .owl-carousel.carousel-1 {
          display: block;
        }
      </style>
    </noscript>
  </head>

  <body>
    <noscript
      ><div
        class="bg-danger text-white text-center position-absolute"
        style="z-index: 9999999; left: 0; right: 0; top: 0"
      >
        Please enable JavaScript for full functionality.
      </div></noscript
    >
    <div class="loader">
      <div class="lds-ring">
        <div></div>
        <div></div>
        <div></div>
        <div></div>
      </div>
    </div>

    <div id="top" class="wrapper">
      <nav class="navbar fixed-top navbar-expand-lg navbar-light bg-white">
  <div class="container">
    <a class="navbar-brand" href="/">
      <img
        src="/assets/img/apple-icon-60x60.png"
        class="d-inline-block align-top logo"
        alt="Avopado"
      />
      Avopado
    </a>
    <button
      class="navbar-toggler"
      type="button"
      data-toggle="collapse"
      data-target="#navbarNavAltMarkup"
      aria-controls="navbarNavAltMarkup"
      aria-expanded="false"
      aria-label="Toggle navigation"
    >
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
      <div class="navbar-nav ml-auto">
         
        <a
          class="nav-item nav-link "
          href="/"
          >Home</a
        >
          
        <a
          class="nav-item nav-link "
          href="/blog/"
          >Blog</a
        >
          
        <a
          class="nav-item nav-link "
          href="/categories/"
          >Categories</a
        >
         
      </div>
    </div>
  </div>
</nav>



      <div class="content-wrapper"><!--                            
This layout is used for posts. Changing anything here will affect all posts(not pages)
 -->

<div class="post">
  <main>
    <header class="position-relative text-center rev">
      <div class="header-image" style="background-image: url(/assets/post/18-02-14-IgH-EtherCAT/ethercat.jpg)"></div>
      <h1 class="post-title position-absolute">IgH EtherCAT Master Stack API 분석</h1>
    </header>
    <div class="container">
      <div class="blog-content pd">
        <div class="row">
          <div class="col-md-12">
            
<ul class="breadcrumbs rev">
	<li><a href="/">Home</a></li>
	
	
	<li><a href="/blog/">Blog</a></li>
	
	
	
	<li><a href="#">IgH EtherCAT Mast...</a></li>
	
	
</ul>

          </div>
        </div>

        <div class="row">
          <div class="col-md-12 meta">
            <p><small>
                <span>
                  <i class="fa fa-calendar" aria-hidden="true"></i> 14 Feb 2018&nbsp;
                </span>
                <span>
                  <i class="fa fa-user" aria-hidden="true"></i> Khlee&nbsp;
                </span>
                <span>
                  <i class="fa fa-clock-o" aria-hidden="true"></i> 12 mins read.
                </span>
              </small></p>
          </div>
        </div>

        <div class="row">
          <div class="col-md-12">

            <article>
              
<ul class="toc rev clearfix">
  <li><a href="#준비물">준비물</a></li>
  <li><a href="#참고자료">참고자료</a></li>
  <li><a href="#예제코드">예제코드</a></li>
  <li><a href="#설명">설명</a></li>
  <li><a href="#마스터-초기화">마스터 초기화</a></li>
  <li><a href="#슬레이브-초기화">슬레이브 초기화</a></li>
  <li><a href="#입출력pdo-설정">입출력(PDO) 설정</a></li>
  <li><a href="#마스터-활성화">마스터 활성화</a></li>
  <li><a href="#실행-단계">실행 단계</a></li>
</ul>


              <h2 id="준비물">준비물</h2>

<ul>
  <li>IgH EtherCAT Master Stack 1.5.2와 Xenomai OS가 설치된 제어기</li>
  <li>위 플랫폼에 대한 개발환경 (툴체인, 라이브러리 등)</li>
  <li>Digital I/O EtherCAT Slave 장치</li>
</ul>

<h2 id="참고자료">참고자료</h2>

<ul>
  <li><a href="https://etherlab.org/en/ethercat/">IgH EtherCAT Master Stack 라이브러리</a></li>
  <li><a href="https://etherlab.org/download/ethercat/ethercat-1.5.2.pdf">IgH EtherCAT Master Stack 1.5.2 Documentation</a></li>
</ul>

<h2 id="예제코드">예제코드</h2>

<figure class="highlight"><pre><code class="language-c" data-lang="c"><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;stdlib.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;signal.h&gt;</span><span class="cp">
</span>
<span class="cp">#include</span> <span class="cpf">&lt;native/task.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;native/timer.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;ecrt.h&gt;</span><span class="cp">
</span>
<span class="cp">#define INTERVAL 1000000
</span>
<span class="k">static</span> <span class="kt">void</span> <span class="nf">rt_task_proc</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">arg</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">void</span> <span class="nf">sigint_handler</span><span class="p">(</span><span class="kt">int</span> <span class="n">sig</span><span class="p">);</span>

<span class="cm">/* PDO list to use in application */</span>
<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">slave0_6000_01</span><span class="p">;</span>
<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">slave0_6000_01_bit</span><span class="p">;</span>
<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">slave0_7010_01</span><span class="p">;</span>
<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">slave0_7010_01_bit</span><span class="p">;</span>

<span class="k">static</span> <span class="n">ec_pdo_entry_reg_t</span> <span class="n">pdo_entry_reg</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="p">{</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mh">0x0</span><span class="p">,</span> <span class="mh">0x0</span><span class="p">,</span> <span class="mh">0x6000</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">slave0_6000_01</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">slave0_6000_01_bit</span><span class="p">},</span>
    <span class="p">{</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mh">0x0</span><span class="p">,</span> <span class="mh">0x0</span><span class="p">,</span> <span class="mh">0x7010</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">slave0_7010_01</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">slave0_7010_01_bit</span><span class="p">},</span>
    <span class="p">{}</span>
<span class="p">};</span>

<span class="k">static</span> <span class="n">ec_master_t</span><span class="o">*</span> <span class="n">master</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
<span class="k">static</span> <span class="n">ec_domain_t</span><span class="o">*</span> <span class="n">domain</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
<span class="k">static</span> <span class="kt">uint8_t</span><span class="o">*</span> <span class="n">domain_pd</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>

<span class="k">static</span> <span class="kt">int</span> <span class="n">alive</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span><span class="o">**</span> <span class="n">argv</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">i</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">ret</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="n">ec_master_info_t</span> <span class="n">master_info</span><span class="p">;</span>
    <span class="n">ec_slave_info_t</span><span class="o">*</span> <span class="n">slave_info_list</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
    <span class="n">ec_slave_config_t</span><span class="o">*</span> <span class="n">slave</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">slave_count</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="n">RT_TASK</span><span class="o">*</span> <span class="n">rt_task_plc</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>

    <span class="cm">/* signal handler registration */</span>
    <span class="n">signal</span><span class="p">(</span><span class="n">SIGINT</span><span class="p">,</span> <span class="n">sigint_handler</span><span class="p">);</span>

    <span class="cm">/* configure master */</span>
    <span class="n">master</span> <span class="o">=</span> <span class="n">ecrt_request_master</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
    <span class="k">if</span><span class="p">(</span><span class="n">master</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">"EtherCAT master request failed!</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
        <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="n">domain</span> <span class="o">=</span> <span class="n">ecrt_master_create_domain</span><span class="p">(</span><span class="n">master</span><span class="p">);</span>
    <span class="k">if</span><span class="p">(</span><span class="n">domain</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">"EtherCAT domain creation failed!</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="k">goto</span> <span class="n">CLEANUP</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="n">ret</span> <span class="o">=</span> <span class="n">ecrt_master</span><span class="p">(</span><span class="n">master</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">master_info</span><span class="p">);</span>
    <span class="k">if</span><span class="p">(</span><span class="n">ret</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">"EtherCAT master information request failed!</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="o">-</span><span class="n">ret</span><span class="p">;</span>
        <span class="k">goto</span> <span class="n">CLEANUP</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="cm">/* allocate momory for slave information */</span>
    <span class="n">slave_count</span> <span class="o">=</span> <span class="n">master_info</span><span class="p">.</span><span class="n">slave_count</span><span class="p">;</span>
    <span class="n">slave_info_list</span> <span class="o">=</span> <span class="p">(</span><span class="n">ec_slave_info_t</span><span class="o">*</span><span class="p">)</span><span class="n">malloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="n">ec_slave_info_t</span><span class="p">)</span> <span class="o">*</span> <span class="n">slave_count</span><span class="p">);</span>

    <span class="cm">/* configure slaves */</span>
    <span class="k">for</span><span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">slave_count</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="n">ecrt_master_get_slave</span><span class="p">(</span><span class="n">master</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">slave_info_list</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
        <span class="k">if</span><span class="p">(</span><span class="n">ret</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">printf</span><span class="p">(</span><span class="s">"EtherCAT slave information request failed!</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
            <span class="n">ret</span> <span class="o">=</span> <span class="o">-</span><span class="n">ret</span><span class="p">;</span>
            <span class="k">goto</span> <span class="n">CLEANUP</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="n">slave</span> <span class="o">=</span> <span class="n">ecrt_master_slave_config</span><span class="p">(</span><span class="n">master</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">slave_info_list</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">vendor_id</span><span class="p">,</span>
            <span class="n">slave_info_list</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">product_code</span><span class="p">);</span>
        <span class="k">if</span><span class="p">(</span><span class="n">slave</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">printf</span><span class="p">(</span><span class="s">"EtherCAT slave configuration failed!</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
            <span class="n">ret</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
            <span class="k">goto</span> <span class="n">CLEANUP</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="cm">/* setup PDO registration array */</span>
    <span class="k">for</span><span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">pdo_entry_reg</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">index</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">pdo_entry_reg</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">position</span> <span class="o">&lt;</span> <span class="n">slave_count</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">pdo_entry_reg</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">vendor_id</span> <span class="o">=</span>
                <span class="n">slave_info_list</span><span class="p">[</span><span class="n">pdo_entry_reg</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">position</span><span class="p">].</span><span class="n">vendor_id</span><span class="p">;</span>
            <span class="n">pdo_entry_reg</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">product_code</span> <span class="o">=</span>
                <span class="n">slave_info_list</span><span class="p">[</span><span class="n">pdo_entry_reg</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">position</span><span class="p">].</span><span class="n">product_code</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="cm">/* get PDO entry list */</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">ecrt_domain_reg_pdo_entry_list</span><span class="p">(</span><span class="n">domain</span><span class="p">,</span> <span class="n">pdo_entry_reg</span><span class="p">);</span>
    <span class="k">if</span><span class="p">(</span><span class="n">ret</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">"EtherCAT PDO registration failed!</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
        <span class="k">goto</span> <span class="n">CLEANUP</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="cm">/* create real-time periodic task */</span>
    <span class="n">rt_task_plc</span> <span class="o">=</span> <span class="p">(</span><span class="n">RT_TASK</span><span class="o">*</span><span class="p">)</span><span class="n">malloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="n">RT_TASK</span><span class="p">));</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">rt_task_create</span><span class="p">(</span><span class="n">rt_task_plc</span><span class="p">,</span> <span class="s">"rt_task_plc"</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="n">T_JOINABLE</span><span class="p">);</span>
    <span class="k">if</span><span class="p">(</span><span class="n">ret</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">"Real-time task creation failed!</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
        <span class="k">goto</span> <span class="n">CLEANUP</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="cm">/* activate EtherCAT master */</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">ecrt_master_set_send_interval</span><span class="p">(</span><span class="n">master</span><span class="p">,</span> <span class="n">INTERVAL</span><span class="p">);</span>
    <span class="k">if</span><span class="p">(</span><span class="n">ret</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">"EtherCAT setting send interval failed!</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="o">-</span><span class="n">ret</span><span class="p">;</span>
        <span class="k">goto</span> <span class="n">CLEANUP</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="n">ret</span> <span class="o">=</span> <span class="n">ecrt_master_activate</span><span class="p">(</span><span class="n">master</span><span class="p">);</span>
    <span class="k">if</span><span class="p">(</span><span class="n">ret</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">"EtherCAT master activation failed!</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="o">-</span><span class="n">ret</span><span class="p">;</span>
        <span class="k">goto</span> <span class="n">CLEANUP</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="cm">/* get PDO domain pointer */</span>
    <span class="n">domain_pd</span> <span class="o">=</span> <span class="n">ecrt_domain_data</span><span class="p">(</span><span class="n">domain</span><span class="p">);</span>
    <span class="k">if</span><span class="p">(</span><span class="n">domain_pd</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">"EtherCAT mapping process data failed!</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="k">goto</span> <span class="n">CLEANUP</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="cm">/* start real-time periodic task */</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">rt_task_start</span><span class="p">(</span><span class="n">rt_task_plc</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">rt_task_proc</span><span class="p">,</span> <span class="n">rt_task_plc</span><span class="p">);</span>
    <span class="k">if</span><span class="p">(</span><span class="n">ret</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">"Real-time task start failed!</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
        <span class="k">goto</span> <span class="n">CLEANUP</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">rt_task_join</span><span class="p">(</span><span class="n">rt_task_plc</span><span class="p">);</span>

<span class="n">CLEANUP</span> <span class="o">:</span>
    <span class="k">if</span><span class="p">(</span><span class="n">slave_info_list</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">)</span>
        <span class="n">free</span><span class="p">(</span><span class="n">slave_info_list</span><span class="p">);</span>
    <span class="k">if</span><span class="p">(</span><span class="n">rt_task_plc</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">)</span>
        <span class="n">free</span><span class="p">(</span><span class="n">rt_task_plc</span><span class="p">);</span>

    <span class="k">if</span><span class="p">(</span><span class="n">master</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">)</span>
        <span class="n">ecrt_release_master</span><span class="p">(</span><span class="n">master</span><span class="p">);</span>

    <span class="k">return</span> <span class="n">ret</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">rt_task_proc</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">arg</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">sw</span><span class="p">,</span> <span class="n">led</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="n">RT_TASK</span><span class="o">*</span> <span class="n">rt_task_plc</span> <span class="o">=</span> <span class="p">(</span><span class="n">RT_TASK</span><span class="o">*</span><span class="p">)</span><span class="n">arg</span><span class="p">;</span>
    <span class="n">RTIME</span> <span class="n">current_time</span> <span class="o">=</span> <span class="n">rt_timer_read</span><span class="p">();</span>

    <span class="cm">/* set real-time task timer */</span>
    <span class="n">rt_task_set_periodic</span><span class="p">(</span><span class="n">rt_task_plc</span><span class="p">,</span> <span class="n">current_time</span> <span class="o">+</span> <span class="n">INTERVAL</span><span class="p">,</span>
        <span class="n">rt_timer_ns2ticks</span><span class="p">(</span><span class="n">INTERVAL</span><span class="p">));</span>

    <span class="k">while</span><span class="p">(</span><span class="n">alive</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="cm">/* retrieve */</span>
        <span class="n">ecrt_master_receive</span><span class="p">(</span><span class="n">master</span><span class="p">);</span>
        <span class="n">ecrt_domain_process</span><span class="p">(</span><span class="n">domain</span><span class="p">);</span>
        <span class="n">sw</span> <span class="o">=</span> <span class="n">EC_READ_BIT</span><span class="p">(</span><span class="n">domain_pd</span> <span class="o">+</span> <span class="n">slave0_6000_01</span><span class="p">,</span> <span class="n">slave0_6000_01_bit</span><span class="p">);</span>

        <span class="cm">/* computation */</span>
        <span class="k">if</span><span class="p">(</span><span class="n">sw</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="o">++</span><span class="n">count</span> <span class="o">&gt;=</span> <span class="mi">500</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">led</span> <span class="o">=</span> <span class="o">!</span><span class="n">led</span><span class="p">;</span>
                <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">else</span>
        <span class="p">{</span>
            <span class="n">led</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
            <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="cm">/* publish */</span>
        <span class="n">EC_WRITE_BIT</span><span class="p">(</span><span class="n">domain_pd</span> <span class="o">+</span> <span class="n">slave0_7010_01</span><span class="p">,</span> <span class="n">slave0_7010_01_bit</span><span class="p">,</span> <span class="n">led</span><span class="p">);</span>        <span class="n">ecrt_domain_queue</span><span class="p">(</span><span class="n">domain</span><span class="p">);</span>
        <span class="n">ecrt_master_send</span><span class="p">(</span><span class="n">master</span><span class="p">);</span>

        <span class="cm">/* wait until next period */</span>
        <span class="n">rt_task_wait_period</span><span class="p">(</span><span class="nb">NULL</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">sigint_handler</span><span class="p">(</span><span class="kt">int</span> <span class="n">sig</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">alive</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span></code></pre></figure>

<h2 id="설명">설명</h2>

<p>본 예제 코드는 slave 장치의 스위치가 on 상태인 경우 LED를 1Hz로 깜빡이게 하는 응용이다.<br />
IgH와 같은 역할을 하는 SOEM을 활용한 마스터 예제 코드와 비교해서 IgH가 더 성능도 좋고 기능도 많기 때문인지 예제 코드의 양이 많은 편이다.</p>

<h2 id="마스터-초기화">마스터 초기화</h2>

<figure class="highlight"><pre><code class="language-c" data-lang="c"><span class="n">master</span> <span class="o">=</span> <span class="n">ecrt_request_master</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="n">domain</span> <span class="o">=</span> <span class="n">ecrt_master_create_domain</span><span class="p">(</span><span class="n">master</span><span class="p">);</span>
<span class="n">ecrt_master</span><span class="p">(</span><span class="n">master</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">master_info</span><span class="p">);</span>
<span class="n">slave_count</span> <span class="o">=</span> <span class="n">master_info</span><span class="p">.</span><span class="n">slave_count</span><span class="p">;</span></code></pre></figure>

<p>마스터 초기화는 현재 프로그램이 실행되고 있는 마스터 장치에서 0번 EtherCAT 인터페이스에 대한 오브젝트<code class="highlighter-rouge">master</code>를 받아온 후 그에 대한 도메인 오브젝트<code class="highlighter-rouge">domain</code>을 받는 것으로 이루어진다. 마스터 오브젝트<code class="highlighter-rouge">master</code>가 마스터 장치를 의미한다면, 도메인<code class="highlighter-rouge">domain</code>은 주기적으로 통신할 데이터(PDO)들을 의미한다.<br />
마스터 오브젝트의 필드는 IgH 라이브러리 내에서만 접근할 수 있도록 감추어져 있기 때문에 슬레이브 장치의 수 등 정보를 알기 위해서는 <code class="highlighter-rouge">ecrt_master()</code>로 마스터 오브젝트의 정보를 받아와야 한다. 슬레이브 장치의 수는 <code class="highlighter-rouge">master_info.slave_count</code>를 통해 알 수 있다.</p>

<h2 id="슬레이브-초기화">슬레이브 초기화</h2>

<figure class="highlight"><pre><code class="language-c" data-lang="c"><span class="k">for</span><span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">slave_count</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">ecrt_master_get_slave</span><span class="p">(</span><span class="n">master</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">slave_info_list</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
    <span class="n">ecrt_master_slave_config</span><span class="p">(</span><span class="n">master</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">slave_info_list</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">vendor_id</span><span class="p">,</span>
        <span class="n">slave_info_list</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">product_code</span><span class="p">);</span>
<span class="p">}</span></code></pre></figure>

<p>슬레이브 초기화를 위한 함수 <code class="highlighter-rouge">ecrt_master_slave_config()</code>는 초기화하려는 슬레이브의 Vendor ID와 Product code를 필요로 한다. 해당 정보는 <code class="highlighter-rouge">ecrt_master_get_slave()</code> 함수로 얻어올 수 있다.<br />
본 예제와 같이 슬레이브로부터 필요한 정보를 받아와서 초기화를 하는 방법이 있고 마스터에서 미리 설정된 정보를 이용하여 직접 초기화 하는 방법이 있다. 전자의 경우 슬레이브 내에 설정 정보들이 저장되어 있는 SII(Slave Information Interface)로부터 마스터가 초기화에 필요한 정보를 읽어 초기화가 이루어지며, 후자의 경우 사용자가 특정 슬레이브의 정보가 XML 포맷으로 정의된 ESI 파일을 마스터 프로그램(예를 들어 TwinCAT과 같은 프로그램)을 통해 입력하여 초기화가 이루어진다.</p>

<h2 id="입출력pdo-설정">입출력(PDO) 설정</h2>

<figure class="highlight"><pre><code class="language-c" data-lang="c"><span class="k">static</span> <span class="n">ec_pdo_entry_reg_t</span> <span class="n">pdo_entry_reg</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="p">{</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mh">0x0</span><span class="p">,</span> <span class="mh">0x0</span><span class="p">,</span> <span class="mh">0x6000</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">slave0_6000_01</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">slave0_6000_01_bit</span><span class="p">},</span>
    <span class="p">{</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mh">0x0</span><span class="p">,</span> <span class="mh">0x0</span><span class="p">,</span> <span class="mh">0x7010</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">slave0_7010_01</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">slave0_7010_01_bit</span><span class="p">},</span>
    <span class="p">{}</span>
<span class="p">};</span>
<span class="n">ecrt_domain_reg_pdo_entry_list</span><span class="p">(</span><span class="n">domain</span><span class="p">,</span> <span class="n">pdo_entry_reg</span><span class="p">);</span></code></pre></figure>

<p>주기적으로 통신할 데이터를 정의하는 입출력 설정으로는 <code class="highlighter-rouge">ec_pdo_entry_reg_t</code> 타입의 구조체와 <code class="highlighter-rouge">ecrt_domain_reg_pdo_entry_list()</code> 함수가 사용된다. <code class="highlighter-rouge">ec_pdo_entry_reg_t</code> 구조체는 ecrt.h 파일에 다음과 같이 정의되어 있다.</p>

<figure class="highlight"><pre><code class="language-c" data-lang="c"><span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
    <span class="kt">uint16_t</span> <span class="n">alias</span><span class="p">;</span>
    <span class="kt">uint16_t</span> <span class="n">position</span><span class="p">;</span>
    <span class="kt">uint32_t</span> <span class="n">vendor_id</span><span class="p">;</span>
    <span class="kt">uint32_t</span> <span class="n">product_code</span><span class="p">;</span>
    <span class="kt">uint16_t</span> <span class="n">index</span><span class="p">;</span>
    <span class="kt">uint8_t</span> <span class="n">subindex</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">int</span> <span class="o">*</span><span class="n">offset</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">int</span> <span class="o">*</span><span class="n">bit_position</span><span class="p">;</span>
<span class="p">}</span> <span class="n">ec_pdo_entry_reg_t</span><span class="p">;</span></code></pre></figure>

<p>alias와 position을 통해 어떤 슬레이브 장치인지 특정한다. <code class="highlighter-rouge">vendor_id</code>와 <code class="highlighter-rouge">product_code</code>는 특정한 슬레이브에 대한 정보로, 해당 슬레이브의 정보와 일치해야 한다. 예제 코드에서는 <code class="highlighter-rouge">ecrt_master_get_slave()</code> 함수를 통해 얻은 정보를 이용하여 이 값을 초기화하는 코드가 있다. <code class="highlighter-rouge">index</code>와 <code class="highlighter-rouge">subindex</code>는 특정한 슬레이브 장치에서 통신할 OD(Object Dictionary)의 index와 subindex를 의미한다. 이와 같은 정보를 입력한 구조체의 배열을 정의한 후 <code class="highlighter-rouge">ecrt_domain_reg_pdo_entry_list()</code> 함수를 호출하면 해당 구조체의 마지막 두 필드에 PDO 엔트리의 byte offset과 bit position이 저장된다. 이 값은 추후에 입출력을 위해 사용된다.</p>

<h2 id="마스터-활성화">마스터 활성화</h2>

<figure class="highlight"><pre><code class="language-c" data-lang="c"><span class="n">ecrt_master_set_send_interval</span><span class="p">(</span><span class="n">master</span><span class="p">,</span> <span class="n">INTERVAL</span><span class="p">);</span>
<span class="n">ecrt_master_activate</span><span class="p">(</span><span class="n">master</span><span class="p">);</span>
<span class="n">domain_pd</span> <span class="o">=</span> <span class="n">ecrt_domain_data</span><span class="p">(</span><span class="n">domain</span><span class="p">);</span></code></pre></figure>

<p>마스터가 통신할 주기를 설정하고 활성화한다. 통신할 주기는 <code class="highlighter-rouge">ecrt_master_set_send_interval()</code> 함수를 통해 설정할 수 있으며, 두 번째 인자에 주기를 나노초 단위로 입력하면 된다. 이후에 <code class="highlighter-rouge">ecrt_master_activate()</code> 함수를 통해 마스터 장치를 활성화한다. 활성화 이후에는 실시간 context로 전환되며 <code class="highlighter-rouge">malloc()</code>이나 대부분의 IgH 라이브러리 함수들을 포함하는 비실시간 함수들의 사용은 제한된다. 이 함수가 호출된 이후에는 실시간 함수들만 사용할 수 있다.<br />
<code class="highlighter-rouge">ecrt_domain_data()</code> 함수는 인자로 전달된 도메인에 대한 데이터 필드의 포인터를 받아온다. 이 값도 추후에 입출력을 위해 사용된다.</p>

<h2 id="실행-단계">실행 단계</h2>

<figure class="highlight"><pre><code class="language-c" data-lang="c"><span class="k">while</span><span class="p">(</span><span class="n">alive</span><span class="p">)</span>
<span class="p">{</span>
    <span class="cm">/* retrieve */</span>
    <span class="n">ecrt_master_receive</span><span class="p">(</span><span class="n">master</span><span class="p">);</span>
    <span class="n">ecrt_domain_process</span><span class="p">(</span><span class="n">domain</span><span class="p">);</span>
    <span class="n">sw</span> <span class="o">=</span> <span class="n">EC_READ_BIT</span><span class="p">(</span><span class="n">domain_pd</span> <span class="o">+</span> <span class="n">slave0_6000_01</span><span class="p">,</span> <span class="n">slave0_6000_01_bit</span><span class="p">);</span>

    <span class="cm">/* computation */</span>
    <span class="cm">/* write some computation code... */</span>

    <span class="cm">/* publish */</span>
    <span class="n">EC_WRITE_BIT</span><span class="p">(</span><span class="n">domain_pd</span> <span class="o">+</span> <span class="n">slave0_7010_01</span><span class="p">,</span> <span class="n">slave0_7010_01_bit</span><span class="p">,</span> <span class="n">led</span><span class="p">);</span>
    <span class="n">ecrt_domain_queue</span><span class="p">(</span><span class="n">domain</span><span class="p">);</span>
    <span class="n">ecrt_master_send</span><span class="p">(</span><span class="n">master</span><span class="p">);</span>

    <span class="cm">/* wait until next period */</span>
<span class="p">}</span></code></pre></figure>

<p>실행 단계에서는 <code class="highlighter-rouge">ecrt_master_set_send_interval()</code> 함수를 통해 설정한 주기마다 [retrieve] - [computation] - [publish]를 반복한다.<br />
retrieve에서는 <code class="highlighter-rouge">ecrt_mater_receive()</code> 함수와 <code class="highlighter-rouge">ecrt_domain_process()</code> 함수가 기본적으로 필요하며, 앞서 입출력 설정에서 입력으로 설정한 데이터를 슬레이브로부터 받아오는 것으로 구성된다. 데이터를 받아오는 기능은 ecrt.h에 매크로로 정의되어 있으며 데이터의 타입별로 매크로가 따로 정의되어 있다. (<code class="highlighter-rouge">EC_READ_BIT</code> 등) 이 매크로를 사용할 때 마스터 활성화 단계에서 얻은 도메인 데이터 필드의 포인터(<code class="highlighter-rouge">domain_pd</code>)와 함께 입출력 설정에서 <code class="highlighter-rouge">ecrt_domain_reg_pdo_entry_list()</code> 함수를 통해 얻은 byte offset과 bit position이 사용된다.<br />
computation에서는 retrieve에서 읽어오는 데이터를 토대로 publish에서 쓸 데이터를 계산한다. 이 위치의 코드는 응용에 따라 자유롭게 구성된다.<br />
publish에서는 retrieve와 반대로 먼저 <code class="highlighter-rouge">EC_WRITE_BIT</code> 등의 매크로로 도메인 데이터 필드에 값을 쓴 다음 <code class="highlighter-rouge">ecrt_domain_queue()</code> 함수와 <code class="highlighter-rouge">ecrt_master_send()</code> 함수를 통해 그 값을 슬레이브로 출력한다.</p>

            </article>
            
            <div class="row">
  <div class="col-md-12">
    <p class="categories rev"> <span><a
          href="/categories/#ethercat">EtherCAT</a></span></p>
  </div>
</div>
            


            
            
<div class="author rev">
	<div class="row">
		<div class="col-md-3">
			<img class="author-image" src="/assets/images/avocado-cover.png" alt="khlee">
		</div>
		<div class="col-md-9">
			<h5>khlee</h5>
			<p></p>
			<ul>
				
				<li><a target="_blank" href="https://github.com/lklab"><i class="fa fa-github"
							aria-hidden="true"></i></a></li>
				
				
				<li><a target="_blank" href="https://www.linkedin.com/in/kyeonghyeon-lee-6a3330132"><i class="fa fa-linkedin-square"
							aria-hidden="true"></i></a></li>
				
				
				
				
			</ul>
		</div>
	</div>
</div>

            

            
            <div id="disqus_thread"></div>
<script defer>
  (function () {
    var d = document, s = d.createElement('script');
    s.src = '//lklab-github-io-blog.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
  })();
</script>
<noscript>Please enable JavaScript to view the comments</noscript>
            

            <div class="recent">
	<div class="row">
		<div class="col-md-12">
			<h3>Recent Articles</h3>
		</div>
	</div>
	<div class="row">
		
		
		<div class="col-md-3 rev">
			<a class="nostyle item" href="/blog/Unity-plugin-in-swift/">
				<div class="cards">
					<div class="image" style="background-image: url(/assets/post/21-12-12-Unity-plugin-in-swift/title.jpeg)"></div>
					<p class="title"><small>Unity 2019.3 이상에서 Swift로 플러그인 개발하기</small></p>
				</div>
			</a>
		</div>
		
		
		
		<div class="col-md-3 rev">
			<a class="nostyle item" href="/blog/Object_and_memory/">
				<div class="cards">
					<div class="image" style="background-image: url(/assets/post/18-07-04-Object_and_memory/title.jpeg)"></div>
					<p class="title"><small>JNI 객체 사용과 메모리 관리</small></p>
				</div>
			</a>
		</div>
		
		
		
		<div class="col-md-3 rev">
			<a class="nostyle item" href="/blog/JNI/">
				<div class="cards">
					<div class="image" style="background-image: url(/assets/post/18-06-22-JNI/title.jpeg)"></div>
					<p class="title"><small>JNI로 C와 Java 연동하기</small></p>
				</div>
			</a>
		</div>
		
		
		
		<div class="col-md-3 rev">
			<a class="nostyle item" href="/blog/Font-Display/">
				<div class="cards">
					<div class="image" style="background-image: url(/assets/post/18-05-03-Font-Display/oled.jpg)"></div>
					<p class="title"><small>임베디드 환경에서 폰트 출력하기</small></p>
				</div>
			</a>
		</div>
		
		
	</div>
</div>
          </div>
        </div>
      </div>
    </div>
  </main>
</div></div>

      <a href="#top" class="scrollup"
        ><i class="fa fa-long-arrow-up" aria-hidden="true"></i
      ></a>
      <footer>
  <div class="container">
    <div class="row">
      <div class="col-md-4">
        <div class="logo-box">
          <img width="30" src="/assets/images/avocado-transparent-small.png"
            alt="Avopado" />
          <h3>Avopado</h3>
          <p></p>
        </div>
      </div>
      <div class="col-md-2">
        <h3>Pages</h3>
        <ul>
          
          <li><a href="/">Home</a></li>
          
          <li><a href="/blog/">Blog</a></li>
          
          <li><a href="/categories/">Categories</a></li>
          
        </ul>
      </div>
      <div class="col-md-3">
        <h3>Latest Posts</h3>
        <ul>
          
          <li><a href="/blog/Unity-plugin-in-swift/">Unity 2019.3 이상에서 Swift로 플러그인 개발하기</a></li>
          
          <li><a href="/blog/Object_and_memory/">JNI 객체 사용과 메모리 관리</a></li>
          
          <li><a href="/blog/JNI/">JNI로 C와 Java 연동하기</a></li>
          
          <li><a href="/blog/Font-Display/">임베디드 환경에서 폰트 출력하기</a></li>
          
        </ul>
      </div>
      <div class="col-md-3">
        <h3>Contact</h3>
        <p>Email:<a href="mailto:khlee.avo@gmail.com"> khlee.avo@gmail.com</a></p>
        <!-- <p>Phone:<a href="tel:"> </a></p> -->
        <!--Start of Tidio.to Script-->
        <!-- <script src="//code.tidio.co/atcbwe5jq0ftiidebmmfwybic3nagfnf.js" async></script> -->
        <!--End of Tidio.to Script-->
      </div>
    </div>
  </div>
</footer>
    </div>

    <!-- JQuery  -->
    <script src="//code.jquery.com/jquery-1.11.1.min.js"></script>

    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"
      integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
      crossorigin="anonymous"
    ></script>

    <script
      src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"
      integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
      crossorigin="anonymous"
    ></script>

    <script src="/assets/js/owl.carousel.min.js"></script>

    <!-- Navbar shrink on scroll -->
    <script>
      $(window).scroll(function () {
        if ($(document).scrollTop() > 50) {
          $(".navbar").addClass("shrink");
        } else {
          $(".navbar").removeClass("shrink");
        }
      });
    </script>

    <script>
      $(document).ready(function () {
        $(window).scroll(function () {
          if ($(this).scrollTop() > 100) {
            $(".scrollup").fadeIn();
          } else {
            $(".scrollup").fadeOut();
          }
        });

        $(".scrollup").click(function () {
          $("html, body").animate(
            {
              scrollTop: 0,
            },
            600
          );
          return false;
        });
      });
    </script>

    <!-- SlideDown on click -->
    <script>
      $(document).ready(function () {
        $(".doshow").click(function () {
          var that = $(this).next(".noshow");
          $(that).slideToggle("slow");
          $(".noshow").not(that).slideUp("slow");
        });
      });
    </script>

    <!-- Hide Loader on load -->
    <script>
      $(document).ready(function () {
        $(".loader").hide();
      });
    </script>

    <!-- Reveal items on scroll -->
    <script
      type="text/javascript"
      src="/assets/js/scrollreveal.min.js"
    ></script>
    <script>
      window.sr = ScrollReveal();
      sr.reveal(".rev", {
        duration: 1000,
      });
    </script>

    
  </body>
</html>
